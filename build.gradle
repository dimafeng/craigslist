apply plugin: 'groovy'
apply plugin:'application'

mainClassName = "com.dimafeng.craigslist.Main"

buildscript {
    repositories {
        jcenter()
    }

    dependencies {
        classpath 'eu.appsatori:gradle-fatjar-plugin:0.3'
    }
}

apply plugin: 'eu.appsatori.fatjar'

sourceCompatibility = 1.5
version = '1.0'

repositories {
    mavenCentral()
}

dependencies {
    compile 'org.codehaus.groovy:groovy-all:2.3.9'
    compile 'org.jsoup:jsoup:1.8.1'
    compile 'javax.mail:mail:1.4.7'
    testCompile group: 'junit', name: 'junit', version: '4.11'
}

jar {
    manifest {
        attributes(
            "Main-Class": "com.dimafeng.craigslist.Main")
    }
}

task uberjar(type: Jar, dependsOn: build) {
    from files(sourceSets.main.output.classesDir)
    from {configurations.compile.collect {zipTree(it)}}

    manifest {
        attributes 'Main-Class': 'com.dimafeng.craigslist.Main'
    }
}